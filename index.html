<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Interactive AR Planets with Zoom</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar.js"></script>
    <script src="https://unpkg.com/aframe-drag-look-controls-component/dist/aframe-drag-look-controls-component.min.js"></script>

    <!-- Zoom Handling Script -->
    <script>
        AFRAME.registerComponent('zoom-control', {
            schema: {
                minZoom: { type: 'number', default: 1 },  // Minimum zoom
                maxZoom: { type: 'number', default: 10 }  // Maximum zoom
            },
            init: function () {
                var cameraEl = this.el;
                var zoomLevel = 5;  // Initial zoom level

                // Mouse wheel event for zoom on desktop
                window.addEventListener('wheel', function (event) {
                    if (event.deltaY < 0) {
                        zoomLevel = Math.max(cameraEl.getAttribute('position').z - 0.2, this.data.minZoom);
                    } else {
                        zoomLevel = Math.min(cameraEl.getAttribute('position').z + 0.2, this.data.maxZoom);
                    }
                    cameraEl.setAttribute('position', {x: 0, y: 1.6, z: zoomLevel});
                });

                // Pinch to zoom for mobile devices
                var initialDistance = null;
                window.addEventListener('touchmove', function (event) {
                    if (event.touches.length === 2) {
                        var touch1 = event.touches[0];
                        var touch2 = event.touches[1];
                        var currentDistance = Math.sqrt(Math.pow(touch2.clientX - touch1.clientX, 2) + Math.pow(touch2.clientY - touch1.clientY, 2));
                        
                        if (!initialDistance) {
                            initialDistance = currentDistance;
                        } else {
                            var zoomFactor = (initialDistance - currentDistance) * 0.01;
                            zoomLevel = Math.max(Math.min(cameraEl.getAttribute('position').z + zoomFactor, this.data.maxZoom), this.data.minZoom);
                            cameraEl.setAttribute('position', {x: 0, y: 1.6, z: zoomLevel});
                            initialDistance = currentDistance;
                        }
                    }
                });

                // Reset distance on touch end
                window.addEventListener('touchend', function () {
                    initialDistance = null;
                });
            }
        });
    </script>
</head>
<body style="margin: 0; overflow: hidden;">
    <a-scene embedded arjs>
        <!-- Global Lighting for the Scene -->
        <a-light type="ambient" color="#ffffff" intensity="0.5"></a-light>
        <a-light type="directional" position="2 4 5" intensity="1" castShadow="true"></a-light>

        <!-- Custom Pattern Marker -->
        <a-marker type="pattern" url="pattern-Office-reg.patt">
            
            <!-- Earth Orbiting the Sun with increased segments and new texture -->
            <a-entity id="earthOrbit" position="0 0 0" animation="property: rotation; to: 0 360 0; loop: true; dur: 15000">
                <a-sphere id="earth" position="1.2 0.5 0" radius="0.3" segments-width="64" segments-height="64"
                          material="src: url(/path/to/earty.jpg); sphericalEnvMap: true; shader: standard;" 
                          animation="property: rotation; to: 0 360 0; loop: true; dur: 10000"
                          gesture-handler>
                </a-sphere>
            </a-entity>
            
            <!-- Mars Orbiting the Sun with increased segments and new texture -->
            <a-entity id="marsOrbit" position="0 0 0" animation="property: rotation; to: 0 360 0; loop: true; dur: 20000">
                <a-sphere id="mars" position="2 0.5 0" radius="0.25" segments-width="64" segments-height="64"
                          material="src: url(/path/to/marsy.jpg); sphericalEnvMap: true; shader: standard;" 
                          animation="property: rotation; to: 0 360 0; loop: true; dur: 15000"
                          gesture-handler>
                </a-sphere>
            </a-entity>

            <!-- Sun with fsun.jpg texture, Luminous Effect, and Increased Segments -->
            <a-sphere id="sun" position="0 0.5 0" radius="0.5" segments-width="64" segments-height="64"
                      material="src: url(fsun.jpg); emissive: #FFD700; emissiveIntensity: 3; shader: standard;"
                      animation="property: rotation; to: 0 360 0; loop: true; dur: 12000"
                      gesture-handler>
            </a-sphere>

            <!-- Enhanced Light Source for Sun's Glow -->
            <a-light type="point" intensity="5" position="0 0.5 0" color="#FFD700" distance="10" decay="2" castShadow="true"></a-light>

        </a-marker>

        <!-- Camera with Drag Controls and Zoom Controls -->
        <a-entity camera look-controls drag-look-controls zoom-control></a-entity>
    </a-scene>
</body>
</html>
